{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Reporte Servicios","text":"<p>Bienvenido a la documentaci\u00f3n del proyecto Reporte Servicios.</p> <p>Este proyecto es una API de gesti\u00f3n para un taller mec\u00e1nico, permitiendo la creaci\u00f3n, consulta y descarga en PDF de reportes de servicio detallados.</p>"},{"location":"#caracteristicas","title":"Caracter\u00edsticas","text":"<ul> <li>Gesti\u00f3n de reportes de servicio (CRUD).</li> <li>Generaci\u00f3n autom\u00e1tica de PDFs con ReportLab.</li> <li>Base de datos SQLite gestionada con SQLAlchemy.</li> <li>Validaci\u00f3n de datos con Pydantic.</li> </ul>"},{"location":"#estructura-del-proyecto","title":"Estructura del Proyecto","text":"<ul> <li><code>api/</code>: Endpoints de la API FastAPI.</li> <li><code>core/</code>: L\u00f3gica central del negocio (generaci\u00f3n de PDF, etc.).</li> <li><code>data/</code>: Modelos de base de datos y esquemas.</li> <li><code>interface/</code>: (Si aplica) Interfaz de usuario.</li> </ul>"},{"location":"#instalacion","title":"Instalaci\u00f3n","text":"<ol> <li>Clona el repositorio.</li> <li>Crea un entorno virtual: <code>python -m venv .venv</code></li> <li>Activa el entorno: <code>source .venv/bin/activate</code></li> <li>Instala las dependencias: <code>pip install -r requirements.txt</code> (si existe) o instala manualmente las necesarias.</li> </ol>"},{"location":"#ejecucion","title":"Ejecuci\u00f3n","text":"<p>Para iniciar el servidor de desarrollo:</p> <pre><code>uvicorn main:app --reload --port 8000\n</code></pre>"},{"location":"reference/","title":"Referencia de API","text":"<p>Esta secci\u00f3n contiene la documentaci\u00f3n autom\u00e1tica extra\u00edda de los docstrings del c\u00f3digo fuente.</p>"},{"location":"reference/#endpoints-de-reportes","title":"Endpoints de Reportes","text":""},{"location":"reference/#api.routes.reports","title":"<code>api.routes.reports</code>","text":"<p>Contenedor de endpoints para la api.</p> <p>Aplicaci\u00f3n de APIRouter para la modularizaci\u00f3n de las rutas.</p>"},{"location":"reference/#api.routes.reports-functions","title":"Functions","text":""},{"location":"reference/#api.routes.reports.create_report","title":"<code>create_report(reporte, db=Depends(get_db))</code>","text":"<p>Crea un nuevo reporte en la base de datos.</p> <p>Calcula autom\u00e1ticamente los totales de servicios y repuestos.</p> <p>Parameters:</p> Name Type Description Default <code>reporte</code> <code>Reporte</code> <p>Esquema de datos del reporte a crear.</p> required <code>db</code> <code>Session</code> <p>Sesi\u00f3n de base de datos.</p> <code>Depends(get_db)</code> <p>Returns:</p> Type Description <p>El objeto ReportesDB creado.</p> Source code in <code>api/routes/reports.py</code> <pre><code>@router.post(\n    \"/\",\n    response_model=schemas.Reporte,\n    status_code=status.HTTP_201_CREATED,\n)\ndef create_report(reporte: schemas.Reporte, db: Session = Depends(get_db)):\n    \"\"\"Crea un nuevo reporte en la base de datos.\n\n    Calcula autom\u00e1ticamente los totales de servicios y repuestos.\n\n    Args:\n        reporte: Esquema de datos del reporte a crear.\n        db: Sesi\u00f3n de base de datos.\n\n    Returns:\n        El objeto ReportesDB creado.\n    \"\"\"\n    # C\u00e1lculo de totales de Servicios, Repuestos y Total General.\n    total_servicios = sum(s.presupuesto for s in reporte.servicios)\n    total_repuestos = sum(r.presupuesto for r in reporte.repuestos)\n    total_general = total_servicios + total_repuestos\n\n    # Creaci\u00f3n del objeto principal 'ReportesDB' a partir del modelo pydantic.\n    reporte_data = reporte.dict(exclude={\"servicios\", \"repuestos\"})\n    reporte_data.update(\n        {\n            \"total_servicios\": total_servicios,\n            \"total_repuestos\": total_repuestos,\n            \"total_general\": total_general,\n        }\n    )\n    reporte_db = models.ReportesDB(**reporte_data)\n\n    # Creaci\u00f3n de los objetos 'ServiciosDB' y 'RepuestosDB'.\n    for servicio_in in reporte.servicios:\n        reporte_db.servicios.append(models.ServiciosDB(**servicio_in.dict()))\n\n    for repuesto_in in reporte.repuestos:\n        reporte_db.repuestos.append(models.RepuestosDB(**repuesto_in.dict()))\n\n    # Agregar el reporte a la base de datos y guardar los cambios.\n    db.add(reporte_db)\n    db.commit()\n\n    # Refrescar el objeto para obtener los IDs generados por la base de datos.\n    db.refresh(reporte_db)\n\n    return reporte_db\n</code></pre>"},{"location":"reference/#api.routes.reports.delete_old_reports","title":"<code>delete_old_reports(db=Depends(get_db))</code>","text":"<p>Elimina los 10 reportes m\u00e1s antiguos de la base de datos.</p> <p>Parameters:</p> Name Type Description Default <code>db</code> <code>Session</code> <p>Sesi\u00f3n de base de datos.</p> <code>Depends(get_db)</code> <p>Returns:</p> Type Description <p>Un mensaje con la cantidad de registros eliminados.</p> Source code in <code>api/routes/reports.py</code> <pre><code>@router.delete(\"/clean\", status_code=status.HTTP_200_OK)\ndef delete_old_reports(db: Session = Depends(get_db)):\n    \"\"\"Elimina los 10 reportes m\u00e1s antiguos de la base de datos.\n\n    Args:\n        db: Sesi\u00f3n de base de datos.\n\n    Returns:\n        Un mensaje con la cantidad de registros eliminados.\n    \"\"\"\n    # Buscar los 10 IDs m\u00e1s bajos (ascendente).\n    reportes = (\n        db.query(models.ReportesDB)\n        .order_by(models.ReportesDB.id_reporte.asc())\n        .limit(10)\n        .all()\n    )\n\n    if not reportes:\n        return {\"message\": \"No hay reportes para eliminar.\"}\n\n    count = len(reportes)\n    for r in reportes:\n        db.delete(r)\n\n    try:\n        db.commit()\n    except Exception as e:\n        db.rollback()\n        raise HTTPException(status_code=500, detail=f\"Error al confirmar eliminaci\u00f3n: {str(e)}\")\n\n    return {\"message\": f\"Se han eliminado {count} reportes antiguos correctamente.\"}\n</code></pre>"},{"location":"reference/#api.routes.reports.delete_report","title":"<code>delete_report(reporte_id, db=Depends(get_db))</code>","text":"<p>Elimina un reporte por su ID.</p> <p>Parameters:</p> Name Type Description Default <code>reporte_id</code> <code>int</code> <p>ID del reporte a eliminar.</p> required <code>db</code> <code>Session</code> <p>Sesi\u00f3n de base de datos.</p> <code>Depends(get_db)</code> <p>Returns:</p> Type Description <code>Dict[str, str]</code> <p>Mensaje de confirmaci\u00f3n.</p> <p>Raises:</p> Type Description <code>HTTPException</code> <p>Si el reporte no existe.</p> Source code in <code>api/routes/reports.py</code> <pre><code>@router.delete(\"/{reporte_id}\", status_code=status.HTTP_200_OK)\ndef delete_report(reporte_id: int, db: Session = Depends(get_db)) -&gt; Dict[str, str]:\n    \"\"\"Elimina un reporte por su ID.\n\n    Args:\n        reporte_id: ID del reporte a eliminar.\n        db: Sesi\u00f3n de base de datos.\n\n    Returns:\n        Mensaje de confirmaci\u00f3n.\n\n    Raises:\n        HTTPException: Si el reporte no existe.\n    \"\"\"\n    reporte_db = (\n        db.query(models.ReportesDB)\n        .filter(models.ReportesDB.id_reporte == reporte_id)\n        .first()\n    )\n\n    if reporte_db is None:\n        raise HTTPException(\n            status_code=status.HTTP_404_NOT_FOUND, detail=\"Reporte no encontrado\"\n        )\n\n    db.delete(reporte_db)\n    db.commit()\n\n    return {\"message\": f\"Reporte con ID {reporte_id} eliminado exitosamente\"}\n</code></pre>"},{"location":"reference/#api.routes.reports.get_report_by_id","title":"<code>get_report_by_id(reporte_id, db=Depends(get_db))</code>","text":"<p>Obtiene un reporte espec\u00edfico por su ID.</p> <p>Parameters:</p> Name Type Description Default <code>reporte_id</code> <code>int</code> <p>ID del reporte a buscar.</p> required <code>db</code> <code>Session</code> <p>Sesi\u00f3n de base de datos.</p> <code>Depends(get_db)</code> <p>Returns:</p> Type Description <p>El objeto ReportesDB encontrado.</p> <p>Raises:</p> Type Description <code>HTTPException</code> <p>Si el reporte no existe.</p> Source code in <code>api/routes/reports.py</code> <pre><code>@router.get(\"/{reporte_id}\", response_model=schemas.Reporte)\ndef get_report_by_id(reporte_id: int, db: Session = Depends(get_db)):\n    \"\"\"Obtiene un reporte espec\u00edfico por su ID.\n\n    Args:\n        reporte_id: ID del reporte a buscar.\n        db: Sesi\u00f3n de base de datos.\n\n    Returns:\n        El objeto ReportesDB encontrado.\n\n    Raises:\n        HTTPException: Si el reporte no existe.\n    \"\"\"\n    reporte = (\n        db.query(models.ReportesDB)\n        .options(joinedload(models.ReportesDB.servicios))\n        .options(joinedload(models.ReportesDB.repuestos))\n        .filter(models.ReportesDB.id_reporte == reporte_id)\n        .first()\n    )\n\n    if reporte is None:\n        raise HTTPException(\n            status_code=status.HTTP_404_NOT_FOUND, detail=\"Reporte no encontrado\"\n        )\n    return reporte\n</code></pre>"},{"location":"reference/#api.routes.reports.get_report_pdf","title":"<code>get_report_pdf(reporte_id, db=Depends(get_db))</code>  <code>async</code>","text":"<p>Genera y descarga el PDF de un reporte espec\u00edfico.</p> <p>Parameters:</p> Name Type Description Default <code>reporte_id</code> <code>int</code> <p>ID del reporte.</p> required <code>db</code> <code>Session</code> <p>Sesi\u00f3n de base de datos.</p> <code>Depends(get_db)</code> <p>Returns:</p> Type Description <p>StreamingResponse con el archivo PDF.</p> <p>Raises:</p> Type Description <code>HTTPException</code> <p>Si el reporte no existe.</p> Source code in <code>api/routes/reports.py</code> <pre><code>@router.get(\"/{reporte_id}/pdf\")\nasync def get_report_pdf(reporte_id: int, db: Session = Depends(get_db)):\n    \"\"\"Genera y descarga el PDF de un reporte espec\u00edfico.\n\n    Args:\n        reporte_id: ID del reporte.\n        db: Sesi\u00f3n de base de datos.\n\n    Returns:\n        StreamingResponse con el archivo PDF.\n\n    Raises:\n        HTTPException: Si el reporte no existe.\n    \"\"\"\n    reporte = (\n        db.query(models.ReportesDB)\n        .options(joinedload(models.ReportesDB.servicios))\n        .options(joinedload(models.ReportesDB.repuestos))\n        .filter(models.ReportesDB.id_reporte == reporte_id)\n        .first()\n    )\n\n    if reporte is None:\n        raise HTTPException(\n            status_code=status.HTTP_404_NOT_FOUND,\n            detail=\"Reporte no encontrado\"\n        )\n\n    # Generar PDF.\n    pdf_buffer = generate_report_pdf(reporte)\n    # Asegurarse de que el buffer est\u00e9 al principio.\n    pdf_buffer.seek(0)\n\n    # Devolver el PDF como una respuesta de streaming.\n    filename = f\"reporte_{reporte_id}_{reporte.placa}.pdf\"\n    return StreamingResponse(\n        pdf_buffer,\n        media_type=\"application/pdf\",\n        headers={\"Content-Disposition\": f\"attachment; filename={filename}\"},\n    )\n</code></pre>"},{"location":"reference/#api.routes.reports.get_reports","title":"<code>get_reports(skip=0, limit=15, db=Depends(get_db))</code>","text":"<p>Obtiene una lista paginada de reportes.</p> <p>Parameters:</p> Name Type Description Default <code>skip</code> <code>int</code> <p>Cantidad de registros a saltar (offset).</p> <code>0</code> <code>limit</code> <code>int</code> <p>Cantidad m\u00e1xima de registros a retornar.</p> <code>15</code> <code>db</code> <code>Session</code> <p>Sesi\u00f3n de base de datos.</p> <code>Depends(get_db)</code> <p>Returns:</p> Type Description <p>Un diccionario con el total de reportes y la lista de reportes para la p\u00e1gina actual.</p> Source code in <code>api/routes/reports.py</code> <pre><code>@router.get(\"/\", response_model=schemas.PaginatedReportsResponse)\ndef get_reports(skip: int = 0, limit: int = 15, db: Session = Depends(get_db)):\n    \"\"\"Obtiene una lista paginada de reportes.\n\n    Args:\n        skip: Cantidad de registros a saltar (offset).\n        limit: Cantidad m\u00e1xima de registros a retornar.\n        db: Sesi\u00f3n de base de datos.\n\n    Returns:\n        Un diccionario con el total de reportes y la lista de reportes para la p\u00e1gina actual.\n    \"\"\"\n    total_reportes = db.query(models.ReportesDB).count()\n    reportes = (\n        db.query(models.ReportesDB)\n        .options(joinedload(models.ReportesDB.servicios))\n        .options(joinedload(models.ReportesDB.repuestos))\n        .order_by(models.ReportesDB.id_reporte.desc())\n        .offset(skip)\n        .limit(limit)\n        .all()\n    )\n    return {\"total_count\": total_reportes, \"reports\": reportes}\n</code></pre>"},{"location":"reference/#api.routes.reports.get_reports_by_client_id","title":"<code>get_reports_by_client_id(cedula_cliente, db=Depends(get_db))</code>","text":"<p>Busca reportes por c\u00e9dula del cliente.</p> <p>Parameters:</p> Name Type Description Default <code>cedula_cliente</code> <code>int</code> <p>C\u00e9dula del cliente.</p> required <code>db</code> <code>Session</code> <p>Sesi\u00f3n de base de datos.</p> <code>Depends(get_db)</code> <p>Returns:</p> Type Description <p>Lista de reportes encontrados.</p> <p>Raises:</p> Type Description <code>HTTPException</code> <p>Si no se encuentran reportes para el cliente.</p> Source code in <code>api/routes/reports.py</code> <pre><code>@router.get(\n    \"/cliente/{cedula_cliente}\",\n    response_model=List[schemas.Reporte],\n)\ndef get_reports_by_client_id(cedula_cliente: int, db: Session = Depends(get_db)):\n    \"\"\"Busca reportes por c\u00e9dula del cliente.\n\n    Args:\n        cedula_cliente: C\u00e9dula del cliente.\n        db: Sesi\u00f3n de base de datos.\n\n    Returns:\n        Lista de reportes encontrados.\n\n    Raises:\n        HTTPException: Si no se encuentran reportes para el cliente.\n    \"\"\"\n    reportes = (\n        db.query(models.ReportesDB)\n        .options(joinedload(models.ReportesDB.servicios))\n        .options(joinedload(models.ReportesDB.repuestos))\n        .filter(models.ReportesDB.cedula_cliente == cedula_cliente)\n        .all()\n    )\n\n    if not reportes:\n        raise HTTPException(\n            status_code=status.HTTP_404_NOT_FOUND, detail=\"Cliente no encontrado\"\n        )\n\n    return reportes\n</code></pre>"},{"location":"reference/#api.routes.reports.get_reports_by_client_name","title":"<code>get_reports_by_client_name(nombre, db=Depends(get_db))</code>","text":"<p>Busca reportes por nombre del cliente (b\u00fasqueda parcial insensible a may\u00fasculas).</p> <p>Parameters:</p> Name Type Description Default <code>nombre</code> <code>str</code> <p>Nombre o fragmento del nombre del cliente.</p> required <code>db</code> <code>Session</code> <p>Sesi\u00f3n de base de datos.</p> <code>Depends(get_db)</code> <p>Returns:</p> Type Description <p>Lista de reportes encontrados.</p> <p>Raises:</p> Type Description <code>HTTPException</code> <p>Si no se encuentran reportes.</p> Source code in <code>api/routes/reports.py</code> <pre><code>@router.get(\n    \"/cliente/nombre/{nombre}\",\n    response_model=List[schemas.Reporte],\n)\ndef get_reports_by_client_name(nombre: str, db: Session = Depends(get_db)):\n    \"\"\"Busca reportes por nombre del cliente (b\u00fasqueda parcial insensible a may\u00fasculas).\n\n    Args:\n        nombre: Nombre o fragmento del nombre del cliente.\n        db: Sesi\u00f3n de base de datos.\n\n    Returns:\n        Lista de reportes encontrados.\n\n    Raises:\n        HTTPException: Si no se encuentran reportes.\n    \"\"\"\n    reportes = (\n        db.query(models.ReportesDB)\n        .options(joinedload(models.ReportesDB.servicios))\n        .options(joinedload(models.ReportesDB.repuestos))\n        .filter(models.ReportesDB.nombre_cliente.ilike(f\"%{nombre}%\"))\n        .all()\n    )\n\n    if not reportes:\n        raise HTTPException(\n            status_code=status.HTTP_404_NOT_FOUND,\n            detail=\"Nombre de cliente no encontrado\",\n        )\n\n    return reportes\n</code></pre>"},{"location":"reference/#api.routes.reports.get_reports_by_client_phone","title":"<code>get_reports_by_client_phone(telefono, db=Depends(get_db))</code>","text":"<p>Busca reportes por tel\u00e9fono del cliente.</p> <p>Parameters:</p> Name Type Description Default <code>telefono</code> <code>int</code> <p>N\u00famero de tel\u00e9fono del cliente.</p> required <code>db</code> <code>Session</code> <p>Sesi\u00f3n de base de datos.</p> <code>Depends(get_db)</code> <p>Returns:</p> Type Description <p>Lista de reportes encontrados.</p> <p>Raises:</p> Type Description <code>HTTPException</code> <p>Si no se encuentran reportes.</p> Source code in <code>api/routes/reports.py</code> <pre><code>@router.get(\n    \"/cliente/telefono/{telefono}\",\n    response_model=List[schemas.Reporte],\n)\ndef get_reports_by_client_phone(telefono: int, db: Session = Depends(get_db)):\n    \"\"\"Busca reportes por tel\u00e9fono del cliente.\n\n    Args:\n        telefono: N\u00famero de tel\u00e9fono del cliente.\n        db: Sesi\u00f3n de base de datos.\n\n    Returns:\n        Lista de reportes encontrados.\n\n    Raises:\n        HTTPException: Si no se encuentran reportes.\n    \"\"\"\n    reportes = (\n        db.query(models.ReportesDB)\n        .options(joinedload(models.ReportesDB.servicios))\n        .options(joinedload(models.ReportesDB.repuestos))\n        .filter(models.ReportesDB.telefono_cliente == telefono)\n        .all()\n    )\n\n    if not reportes:\n        raise HTTPException(\n            status_code=status.HTTP_404_NOT_FOUND, detail=\"Tel\u00e9fono no encontrado\"\n        )\n\n    return reportes\n</code></pre>"},{"location":"reference/#api.routes.reports.get_reports_by_plate","title":"<code>get_reports_by_plate(placa, db=Depends(get_db))</code>","text":"<p>Busca reportes por placa del veh\u00edculo.</p> <p>Parameters:</p> Name Type Description Default <code>placa</code> <code>str</code> <p>Placa del veh\u00edculo.</p> required <code>db</code> <code>Session</code> <p>Sesi\u00f3n de base de datos.</p> <code>Depends(get_db)</code> <p>Returns:</p> Type Description <p>Lista de reportes encontrados.</p> <p>Raises:</p> Type Description <code>HTTPException</code> <p>Si no se encuentran reportes.</p> Source code in <code>api/routes/reports.py</code> <pre><code>@router.get(\n    \"/placa/{placa}\",\n    response_model=List[schemas.Reporte],\n)\ndef get_reports_by_plate(placa: str, db: Session = Depends(get_db)):\n    \"\"\"Busca reportes por placa del veh\u00edculo.\n\n    Args:\n        placa: Placa del veh\u00edculo.\n        db: Sesi\u00f3n de base de datos.\n\n    Returns:\n        Lista de reportes encontrados.\n\n    Raises:\n        HTTPException: Si no se encuentran reportes.\n    \"\"\"\n    reportes = (\n        db.query(models.ReportesDB)\n        .options(joinedload(models.ReportesDB.servicios))\n        .options(joinedload(models.ReportesDB.repuestos))\n        .filter(models.ReportesDB.placa == placa)\n        .all()\n    )\n\n    if not reportes:\n        raise HTTPException(\n            status_code=status.HTTP_404_NOT_FOUND,\n            detail=\"No se encontraron reportes para esta placa\",\n        )\n\n    return reportes\n</code></pre>"},{"location":"reference/#api.routes.reports.update_report","title":"<code>update_report(reporte_id, reporte_update, db=Depends(get_db))</code>","text":"<p>Actualiza los datos de un reporte existente.</p> <p>Parameters:</p> Name Type Description Default <code>reporte_id</code> <code>int</code> <p>ID del reporte a actualizar.</p> required <code>reporte_update</code> <code>Reporte</code> <p>Esquema con los nuevos datos del reporte.</p> required <code>db</code> <code>Session</code> <p>Sesi\u00f3n de base de datos.</p> <code>Depends(get_db)</code> <p>Returns:</p> Type Description <p>El objeto ReportesDB actualizado.</p> <p>Raises:</p> Type Description <code>HTTPException</code> <p>Si el reporte no existe.</p> Source code in <code>api/routes/reports.py</code> <pre><code>@router.put(\"/{reporte_id}\", response_model=schemas.Reporte)\ndef update_report(\n    reporte_id: int, reporte_update: schemas.Reporte, db: Session = Depends(get_db)\n):\n    \"\"\"Actualiza los datos de un reporte existente.\n\n    Args:\n        reporte_id: ID del reporte a actualizar.\n        reporte_update: Esquema con los nuevos datos del reporte.\n        db: Sesi\u00f3n de base de datos.\n\n    Returns:\n        El objeto ReportesDB actualizado.\n\n    Raises:\n        HTTPException: Si el reporte no existe.\n    \"\"\"\n    # Filtrado del reporte a actualizar.\n    reporte_db = (\n        db.query(models.ReportesDB)\n        .filter(models.ReportesDB.id_reporte == reporte_id)\n        .first()\n    )\n    if reporte_db is None:\n        raise HTTPException(\n            status_code=status.HTTP_404_NOT_FOUND, detail=\"Reporte no encontrado\"\n        )\n\n    # C\u00e1lculo de totales de servicios y repuestos.\n    total_servicios = sum(s.presupuesto for s in reporte_update.servicios)\n    total_repuestos = sum(r.presupuesto for r in reporte_update.repuestos)\n\n    # Actualizaci\u00f3n de los campos del reporte, incluyendo los totales.\n    update_data = reporte_update.dict(\n        exclude_unset=True, exclude={\"servicios\", \"repuestos\"}\n    )\n    update_data[\"total_servicios\"] = total_servicios\n    update_data[\"total_repuestos\"] = total_repuestos\n    update_data[\"total_general\"] = total_servicios + total_repuestos\n    for key, value in update_data.items():\n        setattr(reporte_db, key, value)\n\n    # Actualizaci\u00f3n de servicios y repuestos (m\u00e9todo simple: borrar y recrear).\n    reporte_db.servicios = []\n    reporte_db.repuestos = []\n    for servicio_in in reporte_update.servicios:\n        reporte_db.servicios.append(models.ServiciosDB(**servicio_in.dict()))\n    for repuesto_in in reporte_update.repuestos:\n        reporte_db.repuestos.append(models.RepuestosDB(**repuesto_in.dict()))\n\n    # Guardar cambios, refrescar y devolver el objeto actualizado.\n    db.commit()\n    db.refresh(reporte_db)\n\n    return reporte_db\n</code></pre>"},{"location":"reference/#generador-de-pdf","title":"Generador de PDF","text":""},{"location":"reference/#core.pdf_generator","title":"<code>core.pdf_generator</code>","text":"<p>Generador de PDFs para Reporte_Servicios.</p> <p>Este m\u00f3dulo utiliza ReportLab para generar archivos PDF con la informaci\u00f3n detallada de los reportes de servicio, incluyendo checklist, presupuesto y firmas.</p>"},{"location":"reference/#core.pdf_generator-classes","title":"Classes","text":""},{"location":"reference/#core.pdf_generator.ServiceReportPDF","title":"<code>ServiceReportPDF</code>","text":"<p>Clase encargada de la generaci\u00f3n del reporte en PDF.</p> <p>Organiza la construcci\u00f3n del documento siguiendo el orden visual: Header -&gt; Info General -&gt; Checklists -&gt; Servicios/Repuestos -&gt; Totales -&gt; Footer.</p> Source code in <code>core/pdf_generator.py</code> <pre><code>class ServiceReportPDF:\n    \"\"\"Clase encargada de la generaci\u00f3n del reporte en PDF.\n\n    Organiza la construcci\u00f3n del documento siguiendo el orden visual:\n    Header -&gt; Info General -&gt; Checklists -&gt; Servicios/Repuestos -&gt; Totales -&gt; Footer.\n    \"\"\"\n\n    def __init__(self, report_data: Any):\n        \"\"\"Inicializa el generador con los datos del reporte.\n\n        Args:\n            report_data: Objeto modelo con los datos del reporte.\n        \"\"\"\n        self.report_data = report_data\n        self.buffer = BytesIO()\n        self.doc = SimpleDocTemplate(\n            self.buffer,\n            pagesize=letter,\n            rightMargin=36,\n            leftMargin=36,\n            topMargin=36,\n            bottomMargin=50,\n        )\n        self.usable_width = letter[0] - self.doc.leftMargin - self.doc.rightMargin - 1\n        self.styles = self._get_styles()\n        self.story: List[Flowable] = []\n\n    def generate(self) -&gt; BytesIO:\n        \"\"\"Construye y genera el PDF.\n\n        Returns:\n            BytesIO con el contenido del PDF.\n        \"\"\"\n        self._build_header()\n        self._build_general_info()\n        self._build_checklists()\n        self._build_observations()\n        self._build_services_and_parts()\n        self._build_totals()\n        self._build_signatures()\n\n        # Build del documento con callback para el footer en cada p\u00e1gina\n        self.doc.build(\n            self.story,\n            onFirstPage=self._draw_footer_callback,\n            onLaterPages=self._draw_footer_callback,\n        )\n        self.buffer.seek(0)\n        return self.buffer\n\n    def _get_styles(self) -&gt; StyleSheet1:\n        \"\"\"Configura los estilos del documento.\"\"\"\n        styles = getSampleStyleSheet()\n        styles.add(ParagraphStyle(name=\"Left\", alignment=TA_LEFT))\n        styles.add(ParagraphStyle(name=\"Right\", alignment=TA_RIGHT))\n        styles.add(\n            ParagraphStyle(\n                name=\"Checklist\", parent=styles[\"Normal\"], fontSize=7.5, leading=8\n            )\n        )\n        styles.add(\n            ParagraphStyle(\n                name=\"Signature\",\n                parent=styles[\"Normal\"],\n                fontSize=5,\n                alignment=TA_CENTER,\n            )\n        )\n        styles[\"h1\"].alignment = TA_CENTER\n        styles[\"h1\"].fontSize = 7.5\n        styles[\"h1\"].fontName = \"Helvetica-Bold\"\n        styles[\"h3\"].alignment = TA_LEFT\n        styles[\"h3\"].fontSize = 7.5\n        styles[\"h3\"].fontName = \"Helvetica-Bold\"\n        styles[\"h3\"].textColor = colors.black\n        styles[\"h3\"].spaceBefore = 2\n        styles[\"h3\"].spaceAfter = 2\n        styles[\"Normal\"].fontSize = 7.5\n        from reportlab.lib.enums import TA_JUSTIFY\n        styles.add(\n            ParagraphStyle(\n                name=\"Clause\",\n                parent=styles[\"Normal\"],\n                fontSize=6.5,\n                leading=8,\n                alignment=TA_JUSTIFY,\n                fontName=\"Helvetica-Oblique\",\n            )\n        )\n        return styles\n\n    # --- Secciones del Documento (En orden visual) ---\n\n    def _build_header(self):\n        \"\"\"Construye el encabezado con info de la empresa e ID del reporte.\"\"\"\n        company_text = (\n            \"&lt;b&gt;&lt;font size='9'&gt;Auto Servicios Integrales&lt;/font&gt;&lt;/b&gt;&lt;br/&gt;\"\n            \"&lt;b&gt;&lt;font size='9'&gt;Los Cerritos L.J. C.A.&lt;/font&gt;&lt;/b&gt;&lt;br/&gt;\"\n            \"R.I.F. J-30497327-6&lt;br/&gt;\"\n            \"Tlf. : 0212-3236867 | 0414-1259502\"\n        )\n\n        from reportlab.lib.styles import ParagraphStyle\n        from reportlab.lib.enums import TA_LEFT, TA_RIGHT\n\n        company_style = ParagraphStyle(\n            name=\"CompanyInfo\",\n            parent=self.styles[\"Normal\"],\n            fontSize=7,\n            leading=8,\n            alignment=TA_LEFT\n        )\n\n        report_id_style = ParagraphStyle(\n            name=\"ReportID\",\n            parent=self.styles[\"h1\"],\n            alignment=TA_RIGHT\n        )\n\n        left_content = Paragraph(company_text, company_style)\n        right_content = Paragraph(f\"Reporte de Servicio -&gt; #{self.report_data.id_reporte}\", report_id_style)\n\n        data = [[left_content, right_content]]\n        col_widths = [self.usable_width * 0.6, self.usable_width * 0.4]\n\n        table = Table(data, colWidths=col_widths)\n        table.setStyle(TableStyle([\n            ('VALIGN', (0, 0), (-1, -1), 'TOP'),\n            ('LEFTPADDING', (0, 0), (-1, -1), 0),\n            ('RIGHTPADDING', (0, 0), (-1, -1), 0),\n            ('BOTTOMPADDING', (0, 0), (-1, -1), 2),\n        ]))\n\n        self.story.append(table)\n        self.story.append(Spacer(1, 0.02 * inch))\n\n    def _build_general_info(self):\n        \"\"\"Construye la secci\u00f3n de informaci\u00f3n general del cliente y veh\u00edculo.\"\"\"\n        self.story.append(Spacer(1, 0.05 * inch))\n        self.story.append(Paragraph(\"Informaci\u00f3n General\", self.styles[\"h3\"]))\n\n        # Calculo de anchos proporcionales\n        w1, w3 = 1.0 * inch, 0.8 * inch\n        w_rest = (self.usable_width - w1 - w3) / 2\n        col_widths = [w1, w_rest, w3, w_rest]\n\n        data = [\n            [\n                \"Fecha:\",\n                self.report_data.fecha.strftime(\"%d-%m-%Y\"),\n                \"Placa:\",\n                self.report_data.placa,\n            ],\n            [\n                \"Nombre Cliente:\",\n                self.report_data.nombre_cliente,\n                \"Modelo:\",\n                self.report_data.modelo,\n            ],\n            [\n                \"C\u00e9dula Cliente:\",\n                str(self.report_data.cedula_cliente),\n                \"Color:\",\n                self.report_data.color,\n            ],\n            [\n                \"Tel\u00e9fono:\",\n                str(self.report_data.telefono_cliente),\n                \"Estado:\",\n                self.report_data.status_reporte.capitalize(),\n            ],\n        ]\n\n        table = Table(data, colWidths=col_widths, hAlign=\"CENTER\")\n        table.setStyle(\n            TableStyle(\n                [\n                    (\"GRID\", (0, 0), (-1, -1), 0.5, colors.grey),\n                    (\"FONTNAME\", (0, 0), (0, -1), \"Helvetica-Bold\"),\n                    (\"FONTNAME\", (2, 0), (2, -1), \"Helvetica-Bold\"),\n                    (\"FONTSIZE\", (0, 0), (-1, -1), 7.5),\n                    (\"BOTTOMPADDING\", (0, 0), (-1, -1), 0.5),\n                    (\"TOPPADDING\", (0, 0), (-1, -1), 0.5),\n                    (\"LEFTPADDING\", (0, 0), (-1, -1), 2),\n                    (\"RIGHTPADDING\", (0, 0), (-1, -1), 2),\n                ]\n            )\n        )\n        self.story.append(table)\n        self.story.append(Spacer(1, 0.02 * inch))\n\n    def _build_checklists(self):\n        \"\"\"Construye las secciones de checklist (Carrocer\u00eda, Accesorios, El\u00e9ctrico).\"\"\"\n        # Carrocer\u00eda\n        carroceria_items = [\n            (\"Golpe\", self.report_data.carroceria_golpe),\n            (\"Suelto\", self.report_data.carroceria_suelto),\n            (\"Rayas\", self.report_data.carroceria_rayas),\n            (\"Desconchado\", self.report_data.carroceria_desconchado),\n            (\"Vidrio Roto\", self.report_data.carroceria_vidrio_roto),\n            (\"Falta Moldura\", self.report_data.carroceria_falta_moldura),\n            (\"Falta Faro\", self.report_data.carroceria_falta_faro),\n            (\"Falta Accesorio\", self.report_data.carroceria_falta_accesorio),\n            (\"Espejo Roto\", self.report_data.carroceria_espejo_roto),\n            (\"Centro Copas\", self.report_data.carroceria_falta_centro_copas),\n            (\"Otro (Carroc.)\", self.report_data.carroceria_otro),\n        ]\n        self.story.append(Paragraph(\"Carrocer\u00eda\", self.styles[\"h3\"]))\n        self.story.append(self._create_checklist_table(carroceria_items))\n\n        # Accesorios\n        accesorios_items = [\n            (\"Alfombra Del\", self.report_data.accesorios_alfombra_delantera),\n            (\"Alfombra Tras\", self.report_data.accesorios_alfombra_trasera),\n            (\"Radio\", self.report_data.accesorios_radio),\n            (\"Reproductor\", self.report_data.accesorios_radio_reproductor),\n            (\"Antena El\u00e9c\", self.report_data.accesorios_antena_electrica),\n            (\"Encendedor\", self.report_data.accesorios_encendedor_cigarrillos),\n            (\"Tri\u00e1ngulo Seg\", self.report_data.accesorios_triangulo_seguridad),\n            (\"Gato\", self.report_data.accesorios_gato),\n            (\"Caucho Rep\", self.report_data.accesorios_caucho_repuesto),\n            (\"Otro (Acces.)\", self.report_data.accesorios_otro),\n        ]\n        self.story.append(Paragraph(\"Accesorios\", self.styles[\"h3\"]))\n        self.story.append(self._create_checklist_table(accesorios_items))\n\n        # Sistemas El\u00e9ctricos\n        electrico_items = [\n            (\"Frenos Del\", self.report_data.sistem_electric_frenos_del),\n            (\"Tablero\", self.report_data.sistem_electric_tablero),\n            (\"Luz Cruce\", self.report_data.sistem_electric_luz_cruce),\n            (\"Luz Stop\", self.report_data.sistem_electric_stop),\n            (\"Vidrio El\u00e9c\", self.report_data.sistem_electric_vidrio_electrico),\n            (\"Aire Acond\", self.report_data.sistem_electric_aire_acondicionado),\n            (\"Otro (Elec.)\", self.report_data.sistem_electric_otro),\n        ]\n        self.story.append(Paragraph(\"Sistemas El\u00e9ctricos\", self.styles[\"h3\"]))\n        self.story.append(self._create_checklist_table(electrico_items))\n\n    def _build_observations(self):\n        \"\"\"Agrega las observaciones adicionales si existen.\"\"\"\n        if self.report_data.observaciones:\n            self.story.append(Paragraph(\"Observaciones Adicionales\", self.styles[\"h3\"]))\n            text = self.report_data.observaciones.replace(\"\\n\", \"&lt;br/&gt;\")\n            self.story.append(Paragraph(text, self.styles[\"Normal\"]))\n\n    def _build_services_and_parts(self):\n        \"\"\"Construye las tablas de servicios realizados y repuestos utilizados.\"\"\"\n        if self.report_data.servicios:\n            rows = [\n                [s.item, s.descripcion, f\"{s.presupuesto:.2f}\"]\n                for s in self.report_data.servicios\n            ]\n            self.story.append(Paragraph(\"Servicios Realizados\", self.styles[\"h3\"]))\n            self.story.append(\n                self._create_items_table(\n                    [\"Item\", \"Descripci\u00f3n\", \"Presupuesto\"], rows\n                )\n            )\n            self.story.append(Spacer(1, 0.02 * inch))\n\n        if self.report_data.repuestos:\n            rows = [\n                [r.cantidad, r.descripcion, f\"{r.presupuesto:.2f}\"]\n                for r in self.report_data.repuestos\n            ]\n            self.story.append(Paragraph(\"Repuestos Utilizados\", self.styles[\"h3\"]))\n            self.story.append(\n                self._create_items_table(\n                    [\"Cant.\", \"Descripci\u00f3n\", \"Presupuesto\"], rows\n                )\n            )\n            self.story.append(Spacer(1, 0.02 * inch))\n\n    def _build_totals(self):\n        \"\"\"Construye la tabla de totales.\"\"\"\n        self.story.append(Spacer(1, 0.02 * inch))\n        self.story.append(Paragraph(\"Totales Generales\", self.styles[\"h3\"]))\n        data = [\n            [\"Total Servicios:\", f\"{self.report_data.total_servicios or 0:.2f}\"],\n            [\"Total Repuestos:\", f\"{self.report_data.total_repuestos or 0:.2f}\"],\n            [\"Total General:\", f\"{self.report_data.total_general or 0:.2f}\"],\n        ]\n        col_widths = [self.usable_width - 1.2 * inch, 1.2 * inch]\n        table = Table(data, colWidths=col_widths)\n        table.setStyle(\n            TableStyle(\n                [\n                    (\"ALIGN\", (0, 0), (-1, -1), \"RIGHT\"),\n                    (\"GRID\", (0, 0), (-1, -1), 0.5, colors.grey),\n                    (\"FONTSIZE\", (0, 0), (-1, -1), 7.5),\n                    (\"BOTTOMPADDING\", (0, 0), (-1, -1), 1),\n                    (\"TOPPADDING\", (0, 0), (-1, -1), 1),\n                ]\n            )\n        )\n        self.story.append(table)\n\n    def _build_signatures(self):\n        \"\"\"Construye la secci\u00f3n de firmas con la cl\u00e1usula de conformidad.\"\"\"\n        self.story.append(Spacer(1, 0.2 * inch))\n        clause_text = (\n            \"Al firmar el presente documento, el cliente declara estar conforme con la inspecci\u00f3n \"\n            \"del veh\u00edculo (checklist) y con los presupuestos de servicios y repuestos aqu\u00ed detallados. \"\n            \"La firma ratifica la veracidad de la informaci\u00f3n recolectada y autoriza la ejecuci\u00f3n \"\n            \"de los trabajos bajo los t\u00e9rminos descritos.\"\n        )\n        self.story.append(Paragraph(clause_text, self.styles[\"Clause\"]))\n\n        self.story.append(Spacer(1, 0.5 * inch))\n        data = [\n            [\"\", \"________________________\"],\n            [\"\", Paragraph(\"Firma Cliente\", self.styles[\"Signature\"])],\n        ]\n        col_widths = [self.usable_width - 2.5 * inch, 2.5 * inch]\n        table = Table(data, colWidths=col_widths)\n        table.setStyle(TableStyle([(\"ALIGN\", (1, 0), (1, 1), \"CENTER\")]))\n        self.story.append(table)\n\n    # --- Helpers y Callbacks ---\n\n    def _create_checklist_table(self, items: List[Tuple[str, bool]]) -&gt; Table:\n        \"\"\"Crea una tabla con formato de checklist.\"\"\"\n        data = []\n        temp_row = []\n        for label, val in items:\n            mark = \"[x]\" if val else \"[ ]\"\n            cell_text = f\"{mark} {label}\"\n            p = Paragraph(cell_text, self.styles[\"Checklist\"])\n            temp_row.append(p)\n            if len(temp_row) == 2:\n                data.append(temp_row)\n                temp_row = []\n        if temp_row:\n            data.append(temp_row + [\"\"])\n\n        t = Table(data, colWidths=[self.usable_width / 2.0] * 2)\n        t.setStyle(\n            TableStyle(\n                [\n                    (\"GRID\", (0, 0), (-1, -1), 0.5, colors.grey),\n                    (\"VALIGN\", (0, 0), (-1, -1), \"MIDDLE\"),\n                    (\"LEFTPADDING\", (0, 0), (-1, -1), 5),\n                    (\"TOPPADDING\", (0, 0), (-1, -1), 1),\n                    (\"BOTTOMPADDING\", (0, 0), (-1, -1), 1),\n                ]\n            )\n        )\n        return t\n\n    def _create_items_table(self, header: List[str], rows: List[List[str]]) -&gt; Table:\n        \"\"\"Crea una tabla para listados de items (servicios/repuestos).\"\"\"\n        data = [header] + rows\n        col_w = [self.usable_width * 0.1, self.usable_width * 0.7, self.usable_width * 0.2]\n\n        t = Table(data, colWidths=col_w)\n        t.setStyle(\n            TableStyle(\n                [\n                    (\"GRID\", (0, 0), (-1, -1), 0.5, colors.grey),\n                    (\"ALIGN\", (2, 0), (2, -1), \"RIGHT\"),\n                    (\"FONTNAME\", (0, 0), (-1, 0), \"Helvetica-Bold\"),\n                    (\"FONTSIZE\", (0, 0), (-1, -1), 7.5),\n                    (\"BOTTOMPADDING\", (0, 0), (-1, -1), 0.5),\n                    (\"TOPPADDING\", (0, 0), (-1, -1), 0.5),\n                    (\"LEFTPADDING\", (0, 0), (-1, -1), 2),\n                    (\"RIGHTPADDING\", (0, 0), (-1, -1), 2),\n                ]\n            )\n        )\n        return t\n\n    @staticmethod\n    def _draw_footer_callback(canvas: Any, doc: SimpleDocTemplate) -&gt; None:\n        \"\"\"Dibuja el pie de p\u00e1gina (Callback para ReportLab).\"\"\"\n        canvas.saveState()\n\n        footer_style = ParagraphStyle(\n            name=\"Footer\",\n            fontSize=8,\n            alignment=TA_CENTER,\n            textColor=colors.grey,\n        )\n\n        text = \"\"\"\n        Avenida Independencia El Llano de Miquilen, Municipio Bolivariano de Guaicaipuro Estado Miranda.\n        \"\"\"\n\n        p = Paragraph(text, footer_style)\n        w, h = p.wrap(doc.width * 0.7, doc.bottomMargin)\n        x = doc.leftMargin + (doc.width - (doc.width * 0.7)) / 2\n        y = doc.bottomMargin - h - 20\n\n        p.drawOn(canvas, x, y)\n        canvas.restoreState()\n</code></pre>"},{"location":"reference/#core.pdf_generator.ServiceReportPDF-functions","title":"Functions","text":""},{"location":"reference/#core.pdf_generator.ServiceReportPDF.__init__","title":"<code>__init__(report_data)</code>","text":"<p>Inicializa el generador con los datos del reporte.</p> <p>Parameters:</p> Name Type Description Default <code>report_data</code> <code>Any</code> <p>Objeto modelo con los datos del reporte.</p> required Source code in <code>core/pdf_generator.py</code> <pre><code>def __init__(self, report_data: Any):\n    \"\"\"Inicializa el generador con los datos del reporte.\n\n    Args:\n        report_data: Objeto modelo con los datos del reporte.\n    \"\"\"\n    self.report_data = report_data\n    self.buffer = BytesIO()\n    self.doc = SimpleDocTemplate(\n        self.buffer,\n        pagesize=letter,\n        rightMargin=36,\n        leftMargin=36,\n        topMargin=36,\n        bottomMargin=50,\n    )\n    self.usable_width = letter[0] - self.doc.leftMargin - self.doc.rightMargin - 1\n    self.styles = self._get_styles()\n    self.story: List[Flowable] = []\n</code></pre>"},{"location":"reference/#core.pdf_generator.ServiceReportPDF.generate","title":"<code>generate()</code>","text":"<p>Construye y genera el PDF.</p> <p>Returns:</p> Type Description <code>BytesIO</code> <p>BytesIO con el contenido del PDF.</p> Source code in <code>core/pdf_generator.py</code> <pre><code>def generate(self) -&gt; BytesIO:\n    \"\"\"Construye y genera el PDF.\n\n    Returns:\n        BytesIO con el contenido del PDF.\n    \"\"\"\n    self._build_header()\n    self._build_general_info()\n    self._build_checklists()\n    self._build_observations()\n    self._build_services_and_parts()\n    self._build_totals()\n    self._build_signatures()\n\n    # Build del documento con callback para el footer en cada p\u00e1gina\n    self.doc.build(\n        self.story,\n        onFirstPage=self._draw_footer_callback,\n        onLaterPages=self._draw_footer_callback,\n    )\n    self.buffer.seek(0)\n    return self.buffer\n</code></pre>"},{"location":"reference/#core.pdf_generator-functions","title":"Functions","text":""},{"location":"reference/#core.pdf_generator.generate_report_pdf","title":"<code>generate_report_pdf(report_data)</code>","text":"<p>Funci\u00f3n fachada para mantener compatibilidad con la API.</p> <p>Parameters:</p> Name Type Description Default <code>report_data</code> <code>Any</code> <p>Datos del reporte.</p> required <p>Returns:</p> Type Description <code>BytesIO</code> <p>BytesIO con el PDF.</p> Source code in <code>core/pdf_generator.py</code> <pre><code>def generate_report_pdf(report_data: Any) -&gt; BytesIO:\n    \"\"\"Funci\u00f3n fachada para mantener compatibilidad con la API.\n\n    Args:\n        report_data: Datos del reporte.\n\n    Returns:\n        BytesIO con el PDF.\n    \"\"\"\n    report_pdf = ServiceReportPDF(report_data)\n    return report_pdf.generate()\n</code></pre>"},{"location":"reference/#modelos-de-base-de-datos","title":"Modelos de Base de Datos","text":""},{"location":"reference/#data.models","title":"<code>data.models</code>","text":"<p>Modelos para base de datos. Definici\u00f3n de las estructuras de las tables.</p>"},{"location":"reference/#data.models-classes","title":"Classes","text":""},{"location":"reference/#data.models.ReportesDB","title":"<code>ReportesDB</code>","text":"<p>               Bases: <code>Base</code></p> <p>Tabla de Reportes (principal).</p> Source code in <code>data/models.py</code> <pre><code>class ReportesDB(Base):\n    \"\"\" Tabla de Reportes (principal). \"\"\"\n\n    __tablename__ = \"reportes\"\n    id_reporte = Column(Integer, primary_key=True, index=True)\n    placa = Column(String, index=True, nullable=False)\n    modelo = Column(String, nullable=False)\n    color = Column(String, nullable=False)\n    cedula_cliente = Column(Integer, nullable=False)\n    nombre_cliente = Column(String, nullable=False)\n    telefono_cliente = Column(Integer, nullable=False)\n    fecha = Column(Date, nullable=False, default=date.today)\n    status_reporte = Column(String, default=\"activa\", nullable=False)\n    factura_reporte = Column(String, nullable=True)\n    factura_monto = Column(Float, nullable=True)\n\n    # Secci\u00f3n CARROCER\u00cdA.\n    carroceria_golpe = Column(Boolean, default=False, nullable=False)\n    carroceria_suelto = Column(Boolean, default=False, nullable=False)\n    carroceria_rayas = Column(Boolean, default=False, nullable=False)\n    carroceria_desconchado = Column(Boolean, default=False, nullable=False)\n    carroceria_vidrio_roto = Column(Boolean, default=False, nullable=False)\n    carroceria_falta_moldura = Column(Boolean, default=False, nullable=False)\n    carroceria_falta_faro = Column(Boolean, default=False, nullable=False)\n    carroceria_falta_accesorio = Column(Boolean, default=False, nullable=False)\n    carroceria_espejo_roto = Column(Boolean, default=False, nullable=False)\n    carroceria_falta_centro_copas = Column(Boolean, default=False, nullable=False)\n    carroceria_otro = Column(Boolean, default=False, nullable=True)\n\n    # Secci\u00f3n ACCESORIOS.\n    accesorios_alfombra_delantera = Column(Boolean, default=False, nullable=False)\n    accesorios_alfombra_trasera = Column(Boolean, default=False, nullable=False)\n    accesorios_radio = Column(Boolean, default=False, nullable=False)\n    accesorios_radio_reproductor = Column(Boolean, default=False, nullable=False)\n    accesorios_antena_electrica = Column(Boolean, default=False, nullable=False)\n    accesorios_encendedor_cigarrillos = Column(Boolean, default=False, nullable=False)\n    accesorios_triangulo_seguridad = Column(Boolean, default=False, nullable=False)\n    accesorios_gato = Column(Boolean, default=False, nullable=False)\n    accesorios_caucho_repuesto = Column(Boolean, default=False, nullable=False)\n    accesorios_otro = Column(Boolean, default=False, nullable=True)\n\n    # Secci\u00f3n SISTEMAS ELECTRICOS.\n    sistem_electric_frenos_del = Column(Boolean, default=False, nullable=False)\n    sistem_electric_tablero = Column(Boolean, default=False, nullable=False)\n    sistem_electric_luz_cruce = Column(Boolean, default=False, nullable=False)\n    sistem_electric_stop = Column(Boolean, default=False, nullable=False)\n    sistem_electric_vidrio_electrico = Column(Boolean, default=False, nullable=False)\n    sistem_electric_aire_acondicionado = Column(Boolean, default=False, nullable=False)\n    sistem_electric_otro = Column(Boolean, default=False, nullable=True)\n\n    observaciones = Column(String, nullable=True)\n    total_servicios = Column(Float, nullable=True)\n    total_repuestos = Column(Float, nullable=True)\n    total_general = Column(Float, nullable=True)\n\n    servicios = relationship(\n        \"ServiciosDB\", back_populates=\"reporte\", cascade=\"all, delete-orphan\"\n    )\n    repuestos = relationship(\n        \"RepuestosDB\", back_populates=\"reporte\", cascade=\"all, delete-orphan\"\n    )\n</code></pre>"},{"location":"reference/#data.models.RepuestosDB","title":"<code>RepuestosDB</code>","text":"<p>               Bases: <code>Base</code></p> <p>Tabla de Repuestos.</p> Source code in <code>data/models.py</code> <pre><code>class RepuestosDB(Base):\n    \"\"\" Tabla de Repuestos. \"\"\"\n\n    __tablename__ = \"repuestos\"\n    id_repuesto = Column(Integer, primary_key=True, index=True)\n    id_reporte = Column(Integer, ForeignKey(\"reportes.id_reporte\"))\n    cantidad = Column(Integer, nullable=False)\n    descripcion = Column(String, nullable=False)\n    presupuesto = Column(Float, nullable=False, default=0.0)\n    reporte = relationship(\"ReportesDB\", back_populates=\"repuestos\")\n</code></pre>"},{"location":"reference/#data.models.ServiciosDB","title":"<code>ServiciosDB</code>","text":"<p>               Bases: <code>Base</code></p> <p>Tabla de Servicios.</p> Source code in <code>data/models.py</code> <pre><code>class ServiciosDB(Base):\n    \"\"\" Tabla de Servicios. \"\"\"\n\n    __tablename__ = \"servicios\"\n    id_servicio = Column(Integer, primary_key=True, index=True)\n    id_reporte = Column(Integer, ForeignKey(\"reportes.id_reporte\"))\n    item = Column(Integer, nullable=False)\n    descripcion = Column(String, nullable=False)\n    presupuesto = Column(Float, nullable=False, default=0.0)\n    reporte = relationship(\"ReportesDB\", back_populates=\"servicios\")\n</code></pre>"},{"location":"reference/#esquemas-pydantic","title":"Esquemas Pydantic","text":""},{"location":"reference/#data.schemas","title":"<code>data.schemas</code>","text":"<p>Schemas de datos.  Validaci\u00f3n de entradas y salidas por medio de pydantic | solicitudes http.</p>"},{"location":"reference/#data.schemas-classes","title":"Classes","text":""},{"location":"reference/#data.schemas.PaginatedReportsResponse","title":"<code>PaginatedReportsResponse</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Clase que otorga los valores necesarios para la paginaci\u00f3n de los reportes en la opci\u00f3n 'Lista de Reportes'.</p> Source code in <code>data/schemas.py</code> <pre><code>class PaginatedReportsResponse(BaseModel):\n    \"\"\" Clase que otorga los valores necesarios para la paginaci\u00f3n de los\n    reportes en la opci\u00f3n 'Lista de Reportes'. \"\"\"\n\n    total_count: int\n    reports: List[Reporte]\n</code></pre>"},{"location":"reference/#data.schemas.Reporte","title":"<code>Reporte</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Tabla de REPORTES (principal).</p> Source code in <code>data/schemas.py</code> <pre><code>class Reporte(BaseModel):\n    \"\"\" Tabla de REPORTES (principal). \"\"\"\n\n    id_reporte: Optional[int] = Field(None, description=\"id autoincrementable\")\n    placa: str = Field(..., max_length=7, description=\"matr\u00edcula del veh\u00edculo\")\n    modelo: str = Field(..., description=\"modelo del veh\u00edculo\")\n    color: str = Field(..., description=\"color del veh\u00edculo\")\n    cedula_cliente: int = Field(..., description=\"n\u00famero identificaci\u00f3n del cliente\")\n    nombre_cliente: str = Field(..., description=\"nombre del cliente\")\n    telefono_cliente: int = Field(..., description=\"n\u00famero tel\u00e9fono del cliente\")\n    fecha: date = Field(\n        default_factory=date.today, description=\"fecha creaci\u00f3n del reporte\"\n    )\n    status_reporte: Literal[\"activa\", \"anulada\"] = Field(\n        \"activa\", description=\"estado del reporte -&gt; activa | anulada\"\n    )\n    factura_reporte: Optional[str] = Field(\n        None, description=\"n\u00famero de factura (en caso de estar facturado)\"\n    )\n    factura_monto: Optional[float] = Field(\n        None, description=\"monto de la factura (en caso de estar facturado)\"\n    )\n\n    # Secci\u00f3n CARROCER\u00cdA.\n    carroceria_golpe: bool = Field(\n        False, description=\"Veh\u00edculo presenta golpes en carrocer\u00eda?\"\n    )\n    carroceria_suelto: bool = Field(\n        False, description=\"Veh\u00edculo presenta alg\u00fan suelto en carrocer\u00eda?\"\n    )\n    carroceria_rayas: bool = Field(\n        False, description=\"Veh\u00edculo presenta alguna raya en carrocer\u00eda?\"\n    )\n    carroceria_desconchado: bool = Field(\n        False, description=\"Veh\u00edculo presenta alg\u00fan desconchado en carrocer\u00eda?\"\n    )\n    carroceria_vidrio_roto: bool = Field(\n        False, description=\"Veh\u00edculo presenta alg\u00fan vidrio roto?\"\n    )\n    carroceria_falta_moldura: bool = Field(\n        False, description=\"Veh\u00edculo presenta falta de moldura?\"\n    )\n    carroceria_falta_faro: bool = Field(\n        False, description=\"Veh\u00edculo presenta falta de faro?\"\n    )\n    carroceria_falta_accesorio: bool = Field(\n        False, description=\"Veh\u00edculo presenta falta de accesorio?\"\n    )\n    carroceria_espejo_roto: bool = Field(\n        False, description=\"Veh\u00edculo presenta alg\u00fan espejo roto?\"\n    )\n    carroceria_falta_centro_copas: bool = Field(\n        False, description=\"Veh\u00edculo presenta falta de centro de copas?\"\n    )\n    carroceria_otro: bool = Field(\n        False, description=\"Veh\u00edculo presenta alg\u00fan otro problema en carrocer\u00eda?\"\n    )\n\n    # Secci\u00f3n ACCESORIOS.\n    accesorios_alfombra_delantera: bool = Field(\n        False, description=\"Falta alguna alfombra delantera al veh\u00edculo?\"\n    )\n    accesorios_alfombra_trasera: bool = Field(\n        False, description=\"Falta alguna alfombra trasera al veh\u00edculo?\"\n    )\n    accesorios_radio: bool = Field(\n        False, description=\"Falla o falta la radio del veh\u00edculo?\"\n    )\n    accesorios_radio_reproductor: bool = Field(\n        False, description=\"Falla o falta el reproductor de la radio\"\n    )\n    accesorios_antena_electrica: bool = Field(\n        False, description=\"Falta la antena el\u00e9ctrica del veh\u00edculo?\"\n    )\n    accesorios_encendedor_cigarrillos: bool = Field(\n        False, description=\"Falta el encendedor de cigarrillos del veh\u00edculo?\"\n    )\n    accesorios_triangulo_seguridad: bool = Field(\n        False, description=\"Falta el tri\u00e1ngulo de seguridad del veh\u00edculo?\"\n    )\n    accesorios_gato: bool = Field(False, description=\"Falta el gato del veh\u00edculo?\")\n    accesorios_caucho_repuesto: bool = Field(\n        False, description=\"Falta el caucho de repuesto del veh\u00edculo?\"\n    )\n    accesorios_otro: bool = Field(\n        False, description=\"Falta alg\u00fan otro accesorio del veh\u00edculo?\"\n    )\n\n    # Secci\u00f3n SISTEMA ELECTRICO.\n    sistem_electric_frenos_del: bool = Field(\n        False, description=\"Fallan los frenos delanteros?\"\n    )\n    sistem_electric_tablero: bool = Field(\n        False, description=\"Falla el tablero del veh\u00edculo?\"\n    )\n    sistem_electric_luz_cruce: bool = Field(\n        False, description=\"Falla la luz de cruce del veh\u00edculo?\"\n    )\n    sistem_electric_stop: bool = Field(\n        False, description=\"Falla la luz de stop del veh\u00edculo?\"\n    )\n    sistem_electric_vidrio_electrico: bool = Field(\n        False, description=\"Falla la luz del vidrio el\u00e9ctrico del veh\u00edculo?\"\n    )\n    sistem_electric_aire_acondicionado: bool = Field(\n        False, description=\"Falla el aire acondicionado del veh\u00edculo?\"\n    )\n    sistem_electric_otro: bool = Field(\n        False, description=\"Falla alg\u00fan otro sistema el\u00e9ctrico del veh\u00edculo?\"\n    )\n\n    observaciones: Optional[str] = Field(\n        None, description=\"Observaciones o detalles extra del checklist\"\n    )\n    total_servicios: Optional[float] = Field(\n        None, description=\"Suma total del presupuesto de servicios\"\n    )\n    total_repuestos: Optional[float] = Field(\n        None, description=\"Suma total del presupuesto de repuestos\"\n    )\n    total_general: Optional[float] = Field(\n        None, description=\"Suma total de servicios y repuestos\"\n    )\n    servicios: List[Servicio] = Field(\n        [], description=\"Lista de servicios asociados al reporte\"\n    )\n    repuestos: List[Repuesto] = Field(\n        [], description=\"Lista de repuestos asociados al reporte\"\n    )\n\n    # .. ...................................... class -&gt; config\n    class Config:\n        \"\"\" Clase de configuraci\u00f3n, ayuda a pydantic a tener claro como deben\n        estar estructurados los datos de los modelos.\n        \"\"\"\n\n        from_attributes = True\n        json_schema_extra = {\n            \"example\": {\n                \"fecha\": \"2025-12-27\",\n                \"placa\": \"PLA11CA\",\n                \"modelo\": \"Modelo Veh\u00edculo\",\n                \"color\": \"color\",\n                \"cedula_cliente\": 1111111,\n                \"nombre_cliente\": \"Nombre Cliente o Empresa\",\n                \"telefono_cliente\": 1234567890,\n                \"status_reporte\": \"activa\",\n                \"servicios\": [{\"item\": 1, \"descripcion\": \"Descripci\u00f3n del servicio\"}],\n                \"repuestos\": [\n                    {\"cantidad\": 1, \"descripcion\": \"Descripci\u00f3n del repuesto\"}\n                ],\n            }\n        }\n</code></pre>"},{"location":"reference/#data.schemas.Reporte-classes","title":"Classes","text":""},{"location":"reference/#data.schemas.Reporte.Config","title":"<code>Config</code>","text":"<p>Clase de configuraci\u00f3n, ayuda a pydantic a tener claro como deben estar estructurados los datos de los modelos.</p> Source code in <code>data/schemas.py</code> <pre><code>class Config:\n    \"\"\" Clase de configuraci\u00f3n, ayuda a pydantic a tener claro como deben\n    estar estructurados los datos de los modelos.\n    \"\"\"\n\n    from_attributes = True\n    json_schema_extra = {\n        \"example\": {\n            \"fecha\": \"2025-12-27\",\n            \"placa\": \"PLA11CA\",\n            \"modelo\": \"Modelo Veh\u00edculo\",\n            \"color\": \"color\",\n            \"cedula_cliente\": 1111111,\n            \"nombre_cliente\": \"Nombre Cliente o Empresa\",\n            \"telefono_cliente\": 1234567890,\n            \"status_reporte\": \"activa\",\n            \"servicios\": [{\"item\": 1, \"descripcion\": \"Descripci\u00f3n del servicio\"}],\n            \"repuestos\": [\n                {\"cantidad\": 1, \"descripcion\": \"Descripci\u00f3n del repuesto\"}\n            ],\n        }\n    }\n</code></pre>"},{"location":"reference/#data.schemas.Repuesto","title":"<code>Repuesto</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Tabla de REPUESTOS.</p> Source code in <code>data/schemas.py</code> <pre><code>class Repuesto(BaseModel):\n    \"\"\" Tabla de REPUESTOS. \"\"\"\n\n    id_repuesto: Optional[int] = Field(None, description=\"id autoincrementable\")\n    id_reporte: Optional[int] = Field(None, description=\"relaci\u00f3n con REPORTES\")\n    cantidad: int = Field(..., description=\"cantidad de repuestos solicitados\")\n    descripcion: str = Field(..., description=\"descripci\u00f3n detallada del repuesto\")\n    presupuesto: float = Field(..., description=\"Costo presupuestado del repuesto\")\n</code></pre>"},{"location":"reference/#data.schemas.Servicio","title":"<code>Servicio</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Tabla de SERVICIOS.</p> Source code in <code>data/schemas.py</code> <pre><code>class Servicio(BaseModel):\n    \"\"\" Tabla de SERVICIOS. \"\"\"\n\n    id_servicio: Optional[int] = Field(None, description=\"id autoincrementable\")\n    id_reporte: Optional[int] = Field(None, description=\"relaci\u00f3n con REPORTES\")\n    item: int = Field(..., description=\"n\u00famero identificador del servicio\")\n    descripcion: str = Field(..., description=\"descripci\u00f3n detallada del servicio\")\n    presupuesto: float = Field(..., description=\"Costo presupuestado del servicio\")\n</code></pre>"}]}